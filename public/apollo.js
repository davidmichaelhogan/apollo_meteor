"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),Apollo=function(){function t(){var e=this;_classCallCheck(this,t),this.api="https://server.launchapollo.com",this.isVisible=!1,this.el=null,this.isDragging=!1,this.dragStartPosition=null,this.currentDragPosition=null,this.bodyMargin=0,this.rand=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},this.isTouchDevice()&&(this.createElement(),this.request(this.api+"/ad?publisher="+window.ApolloOptions.publisher,function(t){t?e.showAd(JSON.parse(t)):e.request(e.api+"/remnant?publisher="+window.ApolloOptions.publisher,function(t){e.createAd(JSON.parse(t))})}),this.attachEvents())}return _createClass(t,[{key:"isTouchDevice",value:function(){return"ontouchstart"in window}},{key:"request",value:function(t,e){try{var i=new(window.XMLHttpRequest||window.ActiveXObject)("MSXML2.XMLHTTP.3.0");i.open("GET",t,1),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.setRequestHeader("Content-type","application/json"),i.onreadystatechange=function(){i.readyState>3&&e&&e(i.responseText,i)},i.send()}catch(t){window.console&&console.log(t)}}},{key:"createElement",value:function(){this.el=document.createElement("div"),this.el.style.width="100%",this.el.style.position="fixed",this.el.style.top="-300px",this.el.style.zIndex="3000000",this.el.style.transition="top 500ms ease",this.el.style.boxSizing="content-box",this.el.style.padding="0",document.body.insertAdjacentElement("beforeend",this.el)}},{key:"createAd",value:function(t){var e=screen.width,i='<iframe id="apolloFrame" src="https://server.apollomobileads.com/ads/'+t.urls[this.rand(0,t.urls.length-1)]+'" style="background-color: transparent" allow-transparency="true" frameBorder="0" scrolling="no" width="'+e+'" height="110"></iframe>';if(this.el.innerHTML=i,this.isTouchDevice()){var n=this;setTimeout(function(){n.el.style.top="10px",n.isVisible=!0},2e3),setTimeout(function(){n.el.style.top="-300px",n.isVisible=!1},1e4)}}},{key:"onTouchStart",value:function(t){var e=t.touches[0].clientY;e<=250&&this.isVisible&&(this.el.style.transition="",this.isDragging=!0,this.dragStartPosition=e)}},{key:"onTouchMove",value:function(t){var e=t.touches[0].clientY,i=this.isDragging?-1*(this.dragStartPosition-e)+10:null;this.currentDragPosition=e,i&&(this.el.style.top=(i>10?10:i)+"px")}},{key:"onTouchEnd",value:function(t){var e=this.dragStartPosition-this.currentDragPosition;this.isVisible&&(this.el.style.transition="top 500ms ease",this.isDragging=!1,this.el.style.top=e>30?"-300px":"10px",this.isVisible=e<=30)}},{key:"attachEvents",value:function(){document.body.addEventListener("touchstart",this.onTouchStart.bind(this),!1),document.body.addEventListener("touchmove",this.onTouchMove.bind(this),!1),document.body.addEventListener("touchend",this.onTouchEnd.bind(this),!1)}},{key:"showAd",value:function(t){this.el.style.width="calc(100% - "+(this.bodyMargin+20)+"px)",this.el.style.padding="0 10px";var e='<a href="'+this.click+"/"+this.env+"/"+window.ApolloOptions.publisher+"/"+t.id+'" target="_blank" style="display: block; width: 100%; text-decoration: none; font-family: arial, sans-serif; font-size: 20px;">\n      <div style="background-color:rgba(234, 237, 240, 1); color:rgb(224,227,230); border-top-right-radius: 10px; border-top-left-radius: 10px; padding: 5px 10px;">\n        <div style="width: 25px; float:left; display:inline-block;">\n          <img src="'+t.logo+'" style="max-width: 100%; max-height: 25px;">\n        </div>\n        <div style="float: right; width: calc(100% - 30px); color:#000; line-height: 25px;">'+t.headline+'</div>\n        <div style="clear:both;"></div>\n      </div>\n      <div style="color:#000; padding: 10px; background-color:rgba(224, 227, 230, .95); border-bottom-right-radius: 10px; border-bottom-left-radius: 10px; font-size: 15px;">\n        '+t.subline+"\n      </div>\n    </a>";if(this.el.innerHTML=e,this.isTouchDevice()){var i=this;setTimeout(function(){i.el.style.top="10px",i.isVisible=!0},2e3),setTimeout(function(){i.el.style.top="-300px",i.isVisible=!1},1e4)}}}]),t}();"undefined"!=typeof window&&window.document&&window.document.createElement&&(window.Apollo=new Apollo);
